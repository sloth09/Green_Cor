# ============================================================================
# BASE CONFIGURATION - Common parameters for all cases
# ============================================================================

# Time period
time_period:
  start_year: 2030
  end_year: 2050

# Economic parameters
economy:
  discount_rate: 0.0            # No discounting - all years weighted equally
  annualization_interest_rate: 0.07  # 7% interest rate for asset annualization (independent of discount_rate)
  fuel_price_usd_per_ton: 600.0 # USD/ton (green ammonia)
  electricity_price_usd_per_kwh: 0.0769

# Ship parameters
shipping:
  kg_per_voyage: 2158995.0      # kg per voyage
  voyages_per_year: 12          # voyages per vessel per year
  start_vessels: 50             # 2030년 선박 수
  end_vessels: 500              # 2050년 선박 수

# Ammonia properties
ammonia:
  density_storage_ton_m3: 0.680 # ton/m3 (storage conditions)
  density_bunkering_ton_m3: 0.681 # ton/m3 (bunkering conditions)

# Fuel consumption (for shuttle operation)
propulsion:
  sfoc_g_per_kwh: 379.0         # Default SFOC (fallback) - use sfoc_map for size-specific values
  pump_delta_pressure_bar: 4.0   # Pump pressure drop
  pump_efficiency: 0.7           # Pump efficiency
  pump_power_cost_usd_per_kw: 2000.0

# SFOC map by shuttle size (DWT-based, ammonia fuel)
# v4.1: DWT-based engine type matching (see docs/parameter/MCR_SFOC_Technical_Report_v4.md)
# DWT < 3,000: 4-stroke high-speed -> 505 g/kWh (diesel 220)
# DWT 3,000-8,000: 4-stroke medium-speed -> 436 g/kWh (diesel 190)
# DWT 8,000-15,000: 4-stroke medium / small 2-stroke -> 413 g/kWh (diesel 180)
# DWT 15,000-30,000: 2-stroke -> 390 g/kWh (diesel 170)
# DWT > 30,000: 2-stroke large -> 379 g/kWh (diesel 165)
sfoc_map_g_per_kwh:
  # DWT < 3,000 ton: 4-stroke high-speed (diesel 220 g/kWh)
  500: 505      # DWT 425
  1000: 505     # DWT 850
  1500: 505     # DWT 1,275
  2000: 505     # DWT 1,700
  2500: 505     # DWT 2,125
  3000: 505     # DWT 2,550
  3500: 505     # DWT 2,975
  # DWT 3,000-8,000 ton: 4-stroke medium-speed (diesel 190 g/kWh)
  4000: 436     # DWT 3,400
  4500: 436     # DWT 3,825
  5000: 436     # DWT 4,250
  7500: 436     # DWT 6,375
  # DWT 8,000-15,000 ton: 4-stroke medium / small 2-stroke (diesel 180 g/kWh)
  10000: 413    # DWT 8,500
  15000: 413    # DWT 12,750
  # DWT 15,000-30,000 ton: 2-stroke (diesel 170 g/kWh)
  20000: 390    # DWT 17,000
  25000: 390    # DWT 21,250
  30000: 390    # DWT 25,500
  35000: 390    # DWT 29,750
  # DWT > 30,000 ton: 2-stroke large (diesel 165 g/kWh)
  40000: 379    # DWT 34,000
  45000: 379    # DWT 38,250
  50000: 379    # DWT 42,500

# Operating parameters
operations:
  max_annual_hours_per_vessel: 8000.0  # H_max
  setup_time_hours: 0.5          # Hose connection/disconnection/purging time
  tank_safety_factor: 2.0        # Beta - tank capacity safety factor
  daily_peak_factor: 1.5         # F_peak - daily peak demand factor
  transport_safety_factor: 1.0   # Redundancy prevention factor

# Shore supply system (land-based facility for loading shuttles)
# IMPORTANT: Shore supply loading time is ALWAYS included in cycle time calculations
# The 'enabled' flag ONLY controls whether shore facility COSTS are included
# enabled: true  = include shore tank + pump costs
# enabled: false = exclude shore tank + pump costs (time is still included)
shore_supply:
  enabled: false                 # Cost control: false = exclude shore costs (DEFAULT)
  pump_rate_m3ph: 1500.0         # Shore pump capacity for loading shuttles (m³/h) - FIXED
  loading_time_fixed_hours: 0.0  # Additional fixed time for setup/shutdown

# Tank system (storage at Busan Port for Case 1)
tank_storage:
  size_tons: 35000.0             # Tank capacity (tons)
  cost_per_kg_usd: 1.215         # Tank CAPEX (USD/kg capacity)
  cooling_energy_kwh_per_kg: 0.0378  # Cold storage energy consumption
  fixed_opex_ratio: 0.03         # Fixed OPEX as % of CAPEX
  variable_opex_per_tank_usd: null  # Will be calculated

# Shuttle vessel economy
shuttle:
  ref_capex_usd: 61500000.0      # Reference CAPEX (USD) for 40,000 m3
  ref_size_cbm: 40000.0          # Reference size (m3)
  capex_scaling_exponent: 0.75   # Alpha - scaling exponent (0.75 = 75%)
  fixed_opex_ratio: 0.05         # Fixed OPEX as % of CAPEX
  equipment_ratio: 0.03          # Equipment cost as % of CAPEX

# Bunkering system
bunkering:
  fixed_opex_ratio: 0.05         # Fixed OPEX as % of CAPEX
  equipment_ratio: 0.03          # Equipment cost as % of CAPEX

# Pump specifications (m3/h)
pumps:
  # Fixed pump rate for main optimization (10 scenarios per case)
  available_flow_rates:
    - 1000
  # Full range for sensitivity analysis (S7 figure)
  sensitivity_flow_rates:
    - 400
    - 600
    - 800
    - 1000
    - 1200
    - 1400
    - 1600
    - 1800
    - 2000

# Constraints
constraints:
  max_call_duration_hours: 72.0  # Maximum time for one bunkering call

# Output settings
output:
  round_digits: 2                # Decimal places for CSV output
  make_plots: true               # Generate visualization plots
  plot_top_n: 10                 # Number of top scenarios to plot
  plots_directory: "plots"       # Directory for saving plots

# Fuel per call (will be calculated from bunker volume per call)
# bunker_volume_per_call_m3: calculated from case-specific k_voyages_per_call


execution:
  # Run mode: determines execution scope and parameters
  # Options: "single", "single_scenario", "annual_simulation", "yearly_simulation", "all", "multiple"
  #
  # "single"           : Run ONE case with all shuttle/pump combinations (10 scenarios)
  #                     Slow but comprehensive optimization across all sizes
  #
  # "single_scenario"  : Run ONE case with ONE specific shuttle/pump combination
  #                     Fast single trip time calculation only (no optimization)
  #                     Requires: single_case, single_scenario_shuttle_cbm, single_scenario_pump_m3ph
  #
  # "annual_simulation": Run ONE case with ONE specific shuttle/pump for ONE year
  #                     Calculates required shuttles, annual calls, utilization, costs
  #                     Requires: single_case, single_scenario_shuttle_cbm, single_scenario_pump_m3ph, simulation_year
  #
  # "yearly_simulation": Run ONE case with ONE specific shuttle/pump for ALL years (2030-2050)
  #                     Calculates required shuttles and costs for each year in the time period
  #                     Requires: single_case, single_scenario_shuttle_cbm, single_scenario_pump_m3ph
  #
  # "all"              : Run ALL available cases with all combinations
  #                     (3 cases x 10 scenarios each)
  #
  # "multiple"         : Run specific cases listed in 'multi_cases' with all combinations
  #                     (N cases x 10 scenarios each)
  run_mode: "all"

  # For run_mode: "yearly_simulation", "single_scenario", "annual_simulation", "yearly_simulation" - which case to use
  # Example values: "case_1", "case_2_yeosu", "case_2_ulsan"
  # This field is IGNORED if run_mode is "multiple"
  single_case: "case_1"

  # For run_mode: "single_scenario", "annual_simulation", "yearly_simulation" - specify shuttle size (m³)
  # Example values: 500, 1000, 2000, 5000, 10000, etc.
  # This field is ONLY used when run_mode is "single_scenario", "annual_simulation", or "yearly_simulation"
  single_scenario_shuttle_cbm: 2500

  # For run_mode: "single_scenario", "annual_simulation", "yearly_simulation" - specify pump flow rate (m³/h)
  # Example values: 400, 600, 800, 1000, 1200, 1500, 2000
  # This field is ONLY used when run_mode is "single_scenario", "annual_simulation", or "yearly_simulation"
  single_scenario_pump_m3ph: 2000

  # For run_mode: "annual_simulation" - specify simulation year
  # Example values: 2030, 2035, 2040, 2045, 2050
  # This field is ONLY used when run_mode is "annual_simulation"
  simulation_year: 2030

  # For run_mode: "multiple" - list specific cases to run
  # Example: run only Case 1 and Case 2-2 (Ulsan)
  # This field is IGNORED if run_mode is "single", "single_scenario", or "all"
  multi_cases:
    - "case_1"
    - "case_2_ulsan"

  # Number of parallel jobs for multi-case execution
  # 1 = sequential execution (slower but uses less memory)
  # >1 = parallel with specified number of worker processes
  # Example: num_jobs=4 means 4 cases can run simultaneously
  # This field is ONLY used when run_mode is "multiple" or "all"
  num_jobs: 1

  # Output directory for all results
  output_directory: "results"

  # Export formats for results
  # All formats can be enabled/disabled independently
  export:
    csv: true               # Export to CSV (lightweight, always recommended)
    excel: true             # Export to Excel (.xlsx) with multiple sheets
    docx: true              # Export to Word document (.docx) report format
    pptx: false             # Export to PowerPoint (not yet implemented)
